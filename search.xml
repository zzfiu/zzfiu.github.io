<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>基于CloudFlare的DDNS解析 进阶版</title>
      <link href="21ac.html"/>
      <url>21ac.html</url>
      
        <content type="html"><![CDATA[<h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><p>要自建DDNS服务，首先必须要有自己的域名且域名已经接入 Cloudflare （即DNS为CF提供的地址），另外就是使用阿里云解析、DNSPOD云解析、Cloudflare云解析等服务，本次教程以 Cloudflare 为例。</p><h4 id="1-获取CFKEY"><a href="#1-获取CFKEY" class="headerlink" title="1. 获取CFKEY"></a>1. 获取CFKEY</h4><p>打开网页：<a href="https://dash.cloudflare.com/profile">https://dash.cloudflare.com/profile</a></p><p>在页面下方找到【Global API Key】，点击右侧的View查看Key，并保存下来</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/cf-1.png" alt="img"></p><h4 id="2-设置用于-DDNS-解析的二级域名"><a href="#2-设置用于-DDNS-解析的二级域名" class="headerlink" title="2. 设置用于 DDNS 解析的二级域名"></a>2. 设置用于 DDNS 解析的二级域名</h4><p>在 Cloudflare 中新建一个A记录，如：ddns.yourdomain.com，指向 1.1.1.1<br>（可随意指定，如123.123.123.123等等，主要用于后续查看 DDNS 是否生效）</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/cf-2.png" alt="img"></p><h4 id="3-下载-DDNS-脚本"><a href="#3-下载-DDNS-脚本" class="headerlink" title="3. 下载 DDNS 脚本"></a>3. 下载 DDNS 脚本</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget  -N --no-check-certificate https://raw.githubusercontent.com/yulewang/cloudflare-api-v4-ddns/master/cf-v4-ddns.sh</span><br></pre></td></tr></table></figure><h4 id="4-修改-DDNS-脚本并填写相关信息"><a href="#4-修改-DDNS-脚本并填写相关信息" class="headerlink" title="4. 修改 DDNS 脚本并填写相关信息"></a>4. 修改 DDNS 脚本并填写相关信息</h4><p>您可在线使用 nano/vi/vim 等工具进行修改，也可以下载到本地进行修改再上传覆盖！<br>可以参考下面命令使用vi进行编辑</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi cf-v4-ddns.sh</span><br></pre></td></tr></table></figure><p>然后按小写字母 i 进入编辑模式</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> API key, see https://www.cloudflare.com/a/account/my-account,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这里填写上一步获取的CFKEY</span></span><br><span class="line">CFKEY=</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">输入你需要解析用来DDNS解析的根域名 eg: example.com，比如我的域名是123.com，那么此处填写123.com</span></span><br><span class="line">CFZONE=</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 登陆CF的Username, eg: user@example.com(即CF的登录邮箱)</span></span><br><span class="line">CFUSER=</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 填写用来DDNS解析的二级域名，与上面设置的要一致, eg: ddns.yourdomain.com（例 ddns.123.com）</span></span><br><span class="line">CFHOST=</span><br></pre></td></tr></table></figure><p>全部填写完毕后按左上角的Esc退出编辑模式，然后输入 :wq 它会自动保存并退出</p><h4 id="5-脚本授权并执行"><a href="#5-脚本授权并执行" class="headerlink" title="5. 脚本授权并执行"></a>5. 脚本授权并执行</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +x cf-v4-ddns.sh</span><br><span class="line">./cf-v4-ddns.sh</span><br></pre></td></tr></table></figure><blockquote><p>如果脚本相关信息填写正确，输出内容会显示当前母鸡IP，登录 Cloudflare <strong>DNS选项</strong> 查看之前设置的 1.1.1.1 已变为母鸡IP</p></blockquote><h4 id="6-设置定时任务"><a href="#6-设置定时任务" class="headerlink" title="6. 设置定时任务"></a>6. 设置定时任务</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">输入 crontab -e  然后会弹出 vi 编辑界面，按小写字母 i 进入编辑模式，在文件里面添加一行：</span><br><span class="line"></span><br><span class="line">*/2 * * * * /root/cf-v4-ddns.sh &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p><strong>如果您需要日志文件，上述代码请替换成下面代码</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">\#如果您需要日志文件，输入下面命令</span><br><span class="line">*/2 * * * * /root/cf-v4-ddns.sh &gt;&gt; /var/log/cf-ddns.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>至此，教程结束！</p><p>转载至 <a href="https://blog.natcloud.net/cf-ddns.html">https://blog.natcloud.net/cf-ddns.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="16107.html"/>
      <url>16107.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
