<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>运营商链路简评&amp;鉴别（163/169/CN2等) | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="市面上的服务器租赁商提供的产品种类繁多，各路aff在推荐的时候往往吹的天花乱坠。博主最近恰好在正式上课前略有空闲，想了一下也不知道该写一些什么。偶然想到一直以来问如何鉴别CN2 GT和GIA的很多，这次就展开这个话题来简单聊聊国内这几种网络该如何辨别、究竟是怎么样的一个存在，顺便也简单对一些误区做些说明。  大陆的主流国际网络有电信电信163、电信CN2、、联通169、联通AS9929、移动CMI"><meta property="og:type" content="article"><meta property="og:title" content="运营商链路简评&amp;鉴别（163&#x2F;169&#x2F;CN2等)"><meta property="og:url" content="https://zzf.red/a2f2.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="市面上的服务器租赁商提供的产品种类繁多，各路aff在推荐的时候往往吹的天花乱坠。博主最近恰好在正式上课前略有空闲，想了一下也不知道该写一些什么。偶然想到一直以来问如何鉴别CN2 GT和GIA的很多，这次就展开这个话题来简单聊聊国内这几种网络该如何辨别、究竟是怎么样的一个存在，顺便也简单对一些误区做些说明。  大陆的主流国际网络有电信电信163、电信CN2、、联通169、联通AS9929、移动CMI"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2021-05-22T17:00:21.000Z"><meta property="article:modified_time" content="2021-05-22T17:03:28.588Z"><meta property="article:author" content="John Doe"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zzf.red/a2f2"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?9057e8bfcb0aaa31989cde805d1d14ea";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"bottom-center"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!0,islazyload:!0,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"运营商链路简评&鉴别（163/169/CN2等)",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!1,postUpdate:"2021-05-23 01:03:28"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode()})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-list-ul"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-cogs"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>电影</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hexo</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-list-ul"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-cogs"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>电影</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">运营商链路简评&amp;鉴别（163/169/CN2等)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-22T17:00:21.000Z" title="发表于 2021-05-23 01:00:21">2021-05-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-22T17:03:28.588Z" title="更新于 2021-05-23 01:03:28">2021-05-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span></div></div></div></header><main class="layout hide-aside" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>市面上的服务器租赁商提供的产品种类繁多，各路aff在推荐的时候往往吹的天花乱坠。博主最近恰好在正式上课前略有空闲，想了一下也不知道该写一些什么。偶然想到一直以来问如何鉴别CN2 GT和GIA的很多，这次就展开这个话题来简单聊聊国内这几种网络该如何辨别、究竟是怎么样的一个存在，顺便也简单对一些误区做些说明。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-23_14-27-27.jpg#vwid=1200&vhei=600" alt="img"></p><p>大陆的主流国际网络有电信电信163、电信CN2、、联通169、联通AS9929、移动CMI以及教育网CERNET/CNGI和科技网CSTNET，其他比如铁通、鹏博士等网络不具有国际出口，故不在本文的讨论范围。</p><hr><h2 id="零、概念简述"><a href="#零、概念简述" class="headerlink" title="零、概念简述"></a>零、概念简述</h2><h3 id="①-国际互联层"><a href="#①-国际互联层" class="headerlink" title="① 国际互联层"></a>① 国际互联层</h3><p>根据电信的资料，一般的国际流量在跨境时要经过的互联层为【<strong>C-I-X-S-F】</strong>，这一套同样适用于联通移动。这其中<strong>C</strong>段为国内核心层，对应北上广城域网的超级汇聚；<strong>I</strong>段为国际出口层，对应北上广的国际出口互联点；<strong>X</strong>和<strong>S</strong>段为国际交换层，对应三大运营商位于海外互联的汇聚；<strong>F</strong>为国际接入层，也就是我们经常提到的POP，用来供给企业等服务商接入网络的接入点。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-23_13-03-22.jpg#vwid=1054&vhei=432" alt="img"></p><p>目前民用网络的拥塞原因主要是C-I段容量不足，由图中亦可看到丢包是发生在C-I段交互后，这一段的网络受政策因素以及成本的影响运营商并不愿意主动扩容这一段网络，网络上可以查到上一次的电信2016上海汇聚扩容招标项目耗资18亿元。</p><hr><h3 id="②-带宽接入及结算"><a href="#②-带宽接入及结算" class="headerlink" title="② 带宽接入及结算"></a>② 带宽接入及结算</h3><p>在欧洲和北美以外的地区，基础网络运营商之间的互联不是免费的。如果问基础运营商是什么，比较不准确的说就是有服务于家庭或一般企业的网络运营商，能够为其互联网用户提供内容；与此相对，诸如Google、Microsoft之类虽然参与了基础网络建设，但是他们是作为内容提供者的角色存在，需要向基础网络运营商支付带宽费用以满足末端用户的需求。</p><p>特别是在亚太地区，本土运营商在基础网络建设中投入了大量的资金，也不存在像欧美互联中心主导的T1免费互联，所以接入本土运营商意味着要向对方支付较高的流量费用。我国普惠家宽的政策使得商用带宽的价格远高于周边国家，整体定价的策略是香港最高，美国最低，接入价格差异可以达到20倍左右。</p><p>这里还需要提到一个概念，就是越高级别的骨干网接入的费用越高，因为末端骨干接入多数流量不一定会占用更高一级的骨干网，但是高级的骨干网意味着到末端整条链路的带宽占用，国际出口恰好就站在这个制高点。同时地理位置越近对大陆的运营商而言同时意味着更高的优先级和更低的QoS级别，至于欧美便宜的原因在于欧美互联网中心的连通性支持使得三大运营商也是受益方。</p><p>接入一家运营商的网络，有接入点POP接入、点对点电路等方式，最常见的是通过POP接入。POP多数情况下就是指运营商位于海外的接入点，也就是上文F层的存在；还有就是像NTT这样在亚太非常强势的运营商，曾经还在上海建立过POP，与电信的互联就是点对点电路直达I段。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-24_21-40-15-1.png#vwid=987&vhei=253" alt="img"></p><p>作为机房而言，连接到大陆既可以向大陆运营商直接购买带宽接入POP，也可以接入一些本土运营商比如Telia/Cogent之流再通过他们与运营商的互联到达大陆。如果你通过本地运营商，比如Cogent这样的廉价商宽，它与三大运营商的互联是有限的，大量带宽的出售导致其部分方向出口容量不足。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-24_21-40-15.png#vwid=877&vhei=180" alt="img"></p><p>另外POP到大陆的总带宽也是固定的，比如移动香港POP到大陆带宽不够，即使你在香港接入了足量到达POP的带宽，也会因为I-X/S段拥塞导致网络质量不及预期。但是不管怎么说，对于大陆优化的机房起码要直接接入CTG的POP，这样至少到POP的带宽是可以保证的，不像PCCW的<code>Mainland Access</code>对电信方向流量进行主动QoS。</p><hr><h3 id="③-TraceRoute"><a href="#③-TraceRoute" class="headerlink" title="③ TraceRoute"></a>③ TraceRoute</h3><p>大规模的网络互联，极少有两点连线式的网络结构，所有的网络流量都要经过BRAS、市级汇聚、省级汇聚再到核心汇聚再前往目的地，中间的路径是由路由表确定的。每经历一级交换机，TTL值会自动加1，直到到达目的IP或TTL达到上限255，所以当我们用从1开始用递增的TTL向某个IP发送ICMP/TCP请求时，能够得到来自中间的交换机的响应，由此即可勾画出到达该IP所经历的路径。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-23_13-15-21.png#vwid=815&vhei=323" alt="img"></p><p>在TraceRoute中常常会遇到中间返回*的情况，这是由于发送的TTL值未得到任何的交换机响应，可能是屏蔽亦可能是不存在对应交换机；再就是比如DDoS-GUARD这样的服务商在进入其骨干网后屏蔽了ICMP协议，我们便无法通过ICMP测得在其骨干网中的路由情况，这也是对于自身骨干网的一种简单保护。</p><hr><h3 id="④-MTR"><a href="#④-MTR" class="headerlink" title="④ MTR"></a>④ MTR</h3><p>mtr和traceroute的原理是相同的，不同在于traceroute仅进行一次发包获取路径，而mtr是通过重复发包获得发出与收到数据包的比例来得到一个丢包率的数据，通过对经过每一级交换机的丢包信息可以得到对网络问题以及质量的诊断。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-23_13-25-09.png#vwid=1014&vhei=388" alt="img"></p><p>在交换机工作中，当负载较高时不会积极响应ICMP包，这就造成MTR中可能存在中间某一跳丢包明显高于前后的现象（如图中14跳），这是正常现象。在去程与回程相同的情况下，丢包率在MTR中应当是逐级上升的，在实际测试中由于诸多因素这一数据会有一些浮动，但是有一点最终丢包率的判定应使用最后一跳即目标的数据，其他异常数据比如前面提到的异常高丢包在我们进行判定的过程中应当忽略掉这一数据。</p><hr><h3 id="⑤-BestTrace"><a href="#⑤-BestTrace" class="headerlink" title="⑤ BestTrace"></a>⑤ BestTrace</h3><p><code>besttrace</code>是<code>ipip.net</code>制作的一个简单、便捷的网络工具，官网地址（<a target="_blank" rel="noopener" href="https://www.ipip.net/">点击前往</a>）。具有较为美观的TraceRoute、MTR等功能，能够在获取路径交换机的IP同时给予一个IP的运营商、地域归属信息，极大地方便了我们对于路由的判断。</p><p>即使ipip.net是国内IP地址库更新最快的，它也不是实时的数据，当运营商部分变动时它也做不到第一时间更新。再就是阿里云、腾讯云内网使用的<code>11.0.0.0/8</code>和<code>9.0.0.0/8</code>分别为美国国防部和IBM持有的IP，地图上就会显示路由绕了美国一圈。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-23_13-37-03.png#vwid=789&vhei=346" alt="img"></p><p>所以路径的判断一定要根据实际情况，同样比如到达广州的国际出口后突然出现一个显示为南京的IP，这时我们就要根据前后的延迟判定它究竟有没有去南京，出现这种情况一般是运营商变动了互联点IP，地址库未及时更新。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-23_13-44-42.png#vwid=1017&vhei=346" alt="img"></p><p>IPIP.NET的Windows端在这里就不再赘述，主要讲讲Linux端的使用。IPIP提供的包是预编译的二进制包，下载后选择对应的版本直接添加执行权限运行即可。</p><p>BestTrace</p><p>Shell</p><table><thead><tr><th>123456789101112131415</th><th>#添加执行权限chmod +x besttrace #执行路由测试./besttrace IP_Address #常用附加参数-q 1 //仅追踪一次-T //使用TCP模式追踪-6 //使用IPv6追踪-g cn //切换中文显示-g en //切换英文显示 #使用举例./besttrace -q 1 1.1.1.1 -T -g cn</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><p>其中TCP追踪的用途在识别一些玩弄手段的服务商时十分有用，绝大多数情况下ICMP和TCP路由是配置成相同的，我们测试的<code>mtr</code>和<code>traceroute</code>默认也是使用ICMP来进行追踪。我们日常使用的http协议等都是基于TCP传输的，有些不法商家便让ICMP走CN2而TCP走163，表面测上去光鲜亮丽，实际使用上便露出原形。在交换机的配置中甚至连TCP大小包都可以设置走不同的路由，所以在测试路由时，最起码一定要同时测一下TCP路由是不是和ICMP的一致。我这里刚好就有个CERA香港的例子，ICMP走香港CN2而实际上TCP走了东京CN2，多出来的24ms延迟也说明它确实经过了日本。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-24_22-04-31.png#vwid=982&vhei=181" alt="img"></p><p>接入CN2的话，也可以分为大陆方向三网均走CN2或者单电信走CN2，二者的价格是有差异的。从电信直接购买的容量一般情况下是仅供电信用户使用的，因为如果要进行跨网的话就需要电信作为利益方为联通或者移动支付一定的Transit费用，并由电信向移动联通请求相应IP的路由表，当然这个相比于CN2的售价也就贵20%左右。</p><p>更多的情况服务商在买了CN2容量之后是选择通过BGP路由策略调整，比如搬瓦工DC6等，强制将流量发往CN2互联点，由于移动的路由策略去程就做不到走CN2骨干去。</p><hr><h2 id="一、中国电信"><a href="#一、中国电信" class="headerlink" title="一、中国电信"></a>一、中国电信</h2><p>中国电信运营有两个主要的骨干网，分别为163民用网（AS4134）和CN2精品网（AS4809），骨干网IP分别是<code>202.97</code>和<code>59.43</code>。电信的精品网全称是<code>ChinaNet Next Carrier Network</code>，简称CNCN或CN2，流量级别在400G左右。CN2网络的建设电信投入了大量的资金购买了Telia、NTT等T1运营商的Transit，同时在国内使用专用的汇聚点，能够保证互联的稳定性。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-25_10-13-14.png#vwid=936&vhei=200" alt="img"></p><p>接入CN2骨干网可以在国内接入本地CN2，价格以江沪浙最低、内陆价格递增；也可以机房在境外接入，分为GT和GIA两项业务，GT即<code>Global Transit</code>、GIA即<code>Global Internet Access</code>。GT业务仅存在于北美，价格是GIA的1/4，国内汇聚点与163共用，质量并没有比163好很多，况且由于CN2骨干网趋于饱和电信已经取消了GT业务的售卖。从163网络前往GIA则是去程走163骨干网前往最近的CN2互联点，回程绝大多数省份可以直接到达城域网；GT则只能在北上广进行互联。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-25_10-11-26.png#vwid=1058&vhei=257" alt="img"></p><p>CN2与163的互联点在最近三年都没有扩容的迹象，比如南京的互联点拥塞严重甚至出现了间歇丢包的情况。如果考虑DDoS防护和速度的均衡，像CERA洛杉矶这样采用163去程CN2回程的是很好的选择。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-25_10-09-28.png#vwid=970&vhei=336" alt="img"></p><p>至于GT与GIA的区别，个人就推荐一个最简单的方法，在IPIP.NET选择一个四川电信的节点，如果去程在成都进入CN2骨干网就是GIA，如果在上海或者广州那就是GT。此方法同样适用于陕西、江苏等具有CN2民用互联点的省份，只要出现了在北上广外跨入CN2骨干网则一定是GIA网络。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-25_10-03-42.png#vwid=1302&vhei=655" alt="img"></p><p>电信内部对于AS4809的路由隔离没有特殊的要求，向下发送路由表就能够改变路由策略，曾经在CN2骨干网负载较低时不少企业同时购买GT和GIA并使用GT的容量偷跑GIA，其中不乏较大的企业如Zenlayer等，今年早些时候都受到了处罚。当然也有阿里云这样反向操作的，本身阿里云在香港没有购买GT，因为轻量服务器为了差异化禁播了AS4809，去程收不到CN2的路由，回程变为CN2 GT，实际上在使用购买的GIA容量跑GT。</p><hr><h2 id="二、中国联通"><a href="#二、中国联通" class="headerlink" title="二、中国联通"></a>二、中国联通</h2><p>中国联通运营有两个具有国际出口的骨干网，分别是CHINA-169民用网（AS4837）和联通工业网（AS9929）。</p><p>其中AS9929是中国网通（China Netcom / CNC）曾经在用的骨干网，在改组重分并入联通后被联通作为精品网进行建设；在2017年更名为CHINA UNICOM Industrial Internet Backbone，简称CUII，常被叫做联通工业网、联通A网。与电信重金建设的CN2不同，AS9929表现优良更大程度是因为负载较低，其网络完备程度、设备可靠性都是低于CN2的。比如AS9929到达北美上游Verizon，曾经都是通过自家AS4837的互联点完成的互联，并没有完全独立出来。</p><p>民用网169这边其实没有太多能够讲的，虽然与电信结构类似，但是联通在亚太地区接驳NTT的容量足够大，互联体验是比电信好很多。北美方向因为TPE数次断缆，到联通北美AS19174似乎已经放弃治疗了，延迟一度达到300ms左右。联通在欧洲接驳的上游仅有Telia和GTT，并且设置了一定的门槛，这也导致联通到欧洲基本上都绕美的。</p><p>联通在国内的北上广汇聚各司其职，与电信的汇聚之间功能平行不同，这也是取决于体量的。其互联点与经过的汇聚是相对固定的，比如QN机房就是北京-洛杉矶、VPLS就是上海-圣何塞。不同的路径之间往往差异比较大，比如现在到北美仅有上海-圣何塞的延迟是非常漂亮的。</p><p>联通海外POP接入其实卖的比电信贵一些，加上联通一直在吃老底，风险应对能力相对比较弱，国内机房专用其作为海外出口接入的寥寥无几。很简单的例子，比如在面对TPE、APCN2断缆时联通直接就是延时上天，而无法快速有效调度。</p><p>总而言之，联通还是一直在啃老底，而且还啃的很香……关键是用的人少，所以一直还在爆炸的路上。相比于电信到哪都比较平庸的质量，联通各方向的好坏差异比较大，你能用比较低的成本选择一个合适的方向（比如远东RT/TTK）。</p><hr><h2 id="三、中国移动"><a href="#三、中国移动" class="headerlink" title="三、中国移动"></a>三、中国移动</h2><p>中国移动运营有CMNET、CMHK、CMI三张骨干网，其中CMI为CMNET和CMHK提供国际网络Transit。</p><p>CMI出售的带宽仅保证本地速度，不保证到达CMNET的速度。这里就想说一句，香港移动即使是香港最便宜的大陆直连带宽，也要十几刀1M，还是比北美CN2贵，而且那个质量是很一言难尽的。</p><p>切记不要被延迟冲昏了头脑，一切还是要以实际体验为准的～</p><hr><h2 id="四、中国教育网"><a href="#四、中国教育网" class="headerlink" title="四、中国教育网"></a>四、中国教育网</h2><p>中国教育网（<code>AS4538</code>）是由赛尔网络运营的中国学术网络，接入单位为高校或学术单位，较新的CERNET骨干网为<code>101.4</code>。</p><p>教育网的带宽费用相比于三大运营商是很贵的，确切的消息是卖到了一年30万/G，而且网络质量并不好。2019年下半年教育网互联点出现了严重的拥塞，晚上到电信的延迟可以达到120ms以上，直连香港拥塞到300ms以上，年初进行了一次扩容，网络质量略有上升。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-07-20_14-18-30.jpg#vwid=668&vhei=241" alt="img"></p><p>教育网的国际网络很简单，物理电路有2<em>10G到洛杉矶、2</em>10G到欧洲以及去年年底从联通买的一根100G到香港。IPv4香港方向接入了20G的Telstra，北美方向接入了10G的TATA，到欧洲的10G是接到欧洲教育网GEANT的，不承载公网流量，其他海外几个海外高校的接入不清除具体情况。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2019-07-02_08-18-26.png#vwid=720&vhei=239" alt="img"></p><p>另一个就是<code>China Next Generation Internet</code>，简称CNGI（<code>AS23911</code>），也就是CERNET2，教育网的IPv6出口网络，同时也作为中国科技网<code>AS7497</code>的IPv6出口（当然目前科技网已经自己另立门户了）。IPv6北美方向接入了共10G的Cogent和HE，<del>香港方向10G的HKIX，其中香港方向由于自有PNI导致很难互联上，负载低速度很快</del>。</p><p>2020年，<code>4538</code>和<code>23911</code>与HKIX的互联点分别以直接和间接的形式接入并开放，并且互联点陆续变更为<code>cernetedu1-lacp-10g</code>和<code>cernet1-lacp-10g</code>，标志着教育网的IPv4和IPv6网络分别与HKIX建立了至少2*10G（总计40G以上）的互联。</p><blockquote><p><strong>LACP</strong>：链路聚合技术。HKIX能够提供的主流物理端口仅有1G/10G/100G等，当你的需求介于二者之间或者更高的时候，HKIX会用链路聚合使多个物理端口融合为一个互联点提供服务，并在PTR中以LACP作为标记。</p></blockquote><hr><h2 id="五，中国科技网"><a href="#五，中国科技网" class="headerlink" title="五，中国科技网"></a>五，中国科技网</h2><p>中国科技网（<code>AS7497</code>）是由中科院运营的中国学术网络，接入单位为中科院直属单位及高校，骨干网<code>159.226</code>。科技网只有香港一个出口，接驳了Cogent、PCCW和HKIX，容量都不是非常大，由于骨干网负载低速度并不慢。</p><p><img src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/2020-08-25_10-50-41.png#vwid=680&vhei=244" alt="img"></p><p>另外有一根10G的网络到达欧洲教育网GEANT，延迟也不错；不过科技网受众很小，价格也不便宜，这里也就简单提一句罢了。</p><hr><h2 id="六、结语"><a href="#六、结语" class="headerlink" title="六、结语"></a>六、结语</h2><p>写这篇文章的目的，一简单谈一下服务器链路怎么看，再就是给三大运营商说两句话；整篇文章是基于博主的一些认知做的描述，不能作为严谨的论述证据引用，可能存在一些谬误，希望大家发现后予以指正。</p><p>三大运营商的国际出口并不是想扩容就能扩容，运营商之间的互联也是永远是永恒不变的利益，作为运营商都更希望将流量留在自己网内而不在互联上花更多的钱，这也是一种互联互通发展的阻碍。</p><blockquote><p>2020年6月，城域网IPv6流入流量<strong>4454.63Gbps</strong>、流出流量<strong>2285.40Gbps</strong>。<br>中国电信：<strong>1045.15Gbps</strong>（入） /<strong>718.11Gbps</strong>（出）<br>中国移动：<strong>1335.54Gbps</strong>（入） /<strong>602.29Gbps</strong>（出）<br>中国联通：<strong>2053.10Gbps</strong>（入） /<strong>948.80Gbps</strong>（出）<br>教育网： <strong>20.84Gbps</strong>（入） /<strong>16.20Gbps</strong>（出）<br>城域网IPv6流入流量占比：中国电信1.29%、中国移动1.83%、中国联通1.53%。</p></blockquote><p>国内互联基础设施的建设成果诸位有目共睹，根据国家IPv6发展平台的流量数据及占比反推三大运营商城域网流量流入峰值已达到300T以上，世界上绝对找不出第二个国家或地区的运营商能够承受如此大的流量。至于用国外服务器感受到的全球畅通感，很大程度上是受益于机房间的互联容量充裕，如果你使用欧美普通家宽访问一些诸如Cogent的廉价单线网络，连通质量便不再是那么光鲜亮丽。</p><p>国内国际出口总量还是不少，中国与韩国类似，但是问题在于政策因素使得境外主流服务商无法在大陆设置CDN节点、无备案网站无法使用国内的CDN，本应在末端获取的信息全部压到了国际出口，这是一种很严重的浪费。境内设置CDN比如Steam的游戏下载，CDN放在了国内，基本上可以当作测网速的存在。最后还是希望有一天，政策能够做出一些改变（当然这可能是不切实际的）。</p><p>有时候也要多一份理解，横向对比，其实国内的网络不是你们口中的“局域网”，也不是所传口中那么不堪。</p><p>转载至 <a target="_blank" rel="noopener" href="https://luotianyi.vc/4242.html">https://luotianyi.vc/4242.html</a> 十分感谢</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://zzf.red/a2f2.html">https://zzf.red/a2f2.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zzf.red" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/9d46.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/gkihqEjXxJ5UZ1C.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">VPS 手动在线一键重装系统脚本整理</div></div></a></div><div class="next-post pull-right"><a href="/21ac.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zzfiu/pic/img/blog/gkihqEjXxJ5UZ1C.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">基于CloudFlare的DDNS解析 进阶版</div></div></a></div></nav></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By John Doe</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script defer src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"></div><script defer src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async mobile="false"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/movies/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script></div></body></html>